<ion-card>
  <ion-item class="schedule-header" id="viewer" lines="none">
    <ion-icon name="receipt-outline"></ion-icon>
    <ion-text class="schedule-name">
      {{schedule.name}}
    </ion-text>
    <ion-button slot="end" (click)="join()" *ngIf="inSession()" [disabled]="joined()">{{ joined() ? "Joined" : "Join" }}</ion-button>
    <ion-icon name="chevron-down-outline" slot="end" (click)="viewSchedule()" *ngIf="!isSlideShow"></ion-icon>
    <ion-icon name="chevron-up-outline" slot="end" (click)="viewSchedule()" *ngIf="isSlideShow"></ion-icon>
  </ion-item>

  <div class="content" *ngIf="isSlideShow">
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="8">
            <ion-icon class="schedule-value-icon" name="barbell-outline"></ion-icon><ion-text class="schedule-value">{{schedule.name}}</ion-text><br>
            <ion-icon class="schedule-value-icon" name="calendar-outline"></ion-icon><ion-text class="schedule-value">{{schedule.date}}</ion-text><br>
            <ion-icon class="schedule-value-icon" name="time-outline"></ion-icon><ion-text class="schedule-value">{{schedule.time}}</ion-text><br>
            <ion-icon class="schedule-value-icon" name="location-outline"></ion-icon><ion-text class="schedule-value">{{schedule.location}}</ion-text><br>
            <ion-icon class="schedule-value-icon" name="timer-outline"></ion-icon><ion-text class="schedule-value">{{schedule.duration}} minutes</ion-text><br>
          </ion-col>
          <ion-col size="4" *ngIf="!isCompleted()">
            <div class="weightlifting-animation">
              <ion-icon src="/assets/dumbbell-exercise-svgrepo-com.svg" size="large" *ngFor="let i of [1,2,3]"></ion-icon>
            </div>
            <button class="exercise-button" (click)="schedule.workoutAdded ? viewWorkout(schedule) : addWorkout(schedule)"
            >
              <ion-icon name="add-circle"></ion-icon> {{ schedule.workoutAdded ? 'View Workout' : 'Add Workout' }}
            </button>
          </ion-col>
        </ion-row>
      </ion-grid>
      <!-- <div *ngIf="isCompleted()"> -->
      <div>
        <h3>Your session has ended. Which exercises were you able to finish</h3>
        <swiper-container pagination="{hideOnClick: true}">
          <swiper-slide *ngFor="let exercise of exercises">
            <ion-card [ngClass]="{ 'completed': isExerciseCompleted(exercise.id) }">
              <ion-card-content>
                <ion-checkbox [ngClass]="{ 'completed': isExerciseCompleted(exercise.id) }"
                  [value]="exercise.id"
                  labelPlacement="end" 
                  justify="start"
                  (ionChange)="toggleExerciseCompletion(exercise.id)">
                  <ion-label>
                    {{exercise.name}}
                  </ion-label>
                </ion-checkbox>
              </ion-card-content>
            </ion-card>
          </swiper-slide>
        </swiper-container>
        <ion-button (click)="submit()">Submit</ion-button>
      </div>
      
    </ion-card-content>
  </div>

  <ion-card-content *ngIf="isEditSlide">
    <edit-schedule [schedule]="schedule"></edit-schedule>
  </ion-card-content>

  <div class="info">
    <ion-item class="progress-label custom-item" lines="none">
      <ion-label *ngIf="!showOptions">{{timeLeft()}}</ion-label>
      <ion-buttons slot="end" *ngIf="showOptions">
        <ion-button class="default-button" (click)="toggleEditSlide()">
          <ion-icon [name]="isEditSlide ? 'close' : 'create'" color="success"></ion-icon>
        </ion-button>
        <ion-button class="default-button" (click)="presentActionSheet()">
          <ion-icon name="trash" class="add-icon"></ion-icon>
        </ion-button>
        <ion-button class="default-button" (click)="openFriendSelectionModal()">
          <ion-icon name="person-add" class="add-icon"></ion-icon>
        </ion-button>
      </ion-buttons>

      <ion-buttons slot="end">
        <ion-button class="default-button" (click)="toogleOptions()">
          <ion-icon *ngIf="!showOptions" name="ellipsis-vertical"></ion-icon>
          <ion-icon *ngIf="showOptions" name="close"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-item>
    <ion-progress-bar [value]="ratio"></ion-progress-bar>
  </div>  
</ion-card>